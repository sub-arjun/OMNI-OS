<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src * 'unsafe-inline' data: blob: file:; script-src * file: 'unsafe-inline' 'wasm-unsafe-eval'; connect-src * 'unsafe-inline' https://* wss://*; frame-src * https://api.canny.io https://canny.io; img-src * data: blob: file:; media-src * data: blob: file:; worker-src * data: blob: file:; font-src * https://openrouter.ai https://*.openrouter.ai 'self' https://assets.canny.io data: blob: file:;"
    />
    <base href="./" />
    <title>OMNI</title>
    <!-- Inject CSS assets -->
    <%= htmlWebpackPlugin.tags.headTags %>
    <style>
      body {
        background: transparent;
        margin: 0;
        padding: 0;
        overflow: hidden;
      }
    </style>
    <script>
      // Early theme initialization to prevent background transparency
      (function() {
        try {
          // Get theme from localStorage early
          const savedTheme = localStorage.getItem('app-theme') || 'light';
          const theme = (savedTheme === 'dark' || savedTheme === 'light') ? savedTheme : 'light';
          
          // Apply theme immediately to prevent flash
          document.documentElement.setAttribute('data-theme', theme);
          document.documentElement.className = 'theme-' + theme;
          
          // Set CSS variables early for better rendering
          if (theme === 'dark') {
            document.documentElement.style.setProperty('--color-bg-base', '25, 27, 27');
            document.documentElement.style.setProperty('--color-bg-surface-1', '46, 46, 46');
            document.documentElement.style.setProperty('--color-text-base', '200, 214, 222');
          } else {
            document.documentElement.style.setProperty('--color-bg-base', '255, 255, 255');
            document.documentElement.style.setProperty('--color-bg-surface-1', '255, 255, 255');
            document.documentElement.style.setProperty('--color-text-base', '3, 7, 18');
          }
        } catch (e) {
          console.warn('Early theme initialization failed:', e);
          // Fallback to light theme
          document.documentElement.setAttribute('data-theme', 'light');
          document.documentElement.className = 'theme-light';
        }
      })();
    </script>
  </head>
  <body>
    <div id="root"></div>
    <!-- Inject JS assets -->
    <%= htmlWebpackPlugin.tags.bodyTags %>
  </body>
</html>
